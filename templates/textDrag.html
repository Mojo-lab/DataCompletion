<!DOCTYPE html>
<html>
  <head>
    <title>Text NER Annotation Tool</title>
       <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"/>

  </head>
  <body>
<nav class="navbar navbar-dark bg-dark navbar-fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="/?user={{htmlData.user}}">
      <img style="padding:0px;" src="/static/images/logo.svg" alt="Logo" width="140" height="70" class="d-inline-block align-text-top">
      </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
      <div class="offcanvas-header">
        <a class="navbar-brand" href="/?user={{htmlData.user}}"><img style="padding:0px;" src="/static/images/logo.svg" alt="Logo" width="120" height="70" class="d-inline-block align-text-top">
      </a>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/?user={{htmlData.user}}">Home</a>
          </li>
          <div class="statuschecker">
          <li class="nav-item">
            <a class="nav-link" href="/login">Login</a>
          </li>
            <li class="nav-item">
            <a class="nav-link" href="/register">Signup</a>
          </li>
            </div>
          <script>
                const username = '{{ htmlData.user }}';
                const collection = document.getElementsByClassName("statuschecker");
                if (username != 'None') {
                collection[0].outerHTML = '<li class="nav-item"><a class="nav-link" href="/userHome?user={{htmlData.user}}">Your Profile</a></li><li class="nav-item"><a class="nav-link" href="/logout">Logout</a></li>';
                }

            </script>
          <li class="nav-item">
            <a class="nav-link" href="/pricing?user={{htmlData.user}}">Pricing</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Company
            </a>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li><a class="dropdown-item" href="/Contact?user={{htmlData.user}}">About</a></li>
              <li><a class="dropdown-item" href="/Contact?user={{htmlData.user}}">Contact</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" href="#">Security</a></li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Resources
            </a>
            <ul class="dropdown-menu dropdown-menu-dark">
              <li><a class="dropdown-item" href="/blog?user={{htmlData.user}}">Blog</a></li>
              <li><a class="dropdown-item" href="/Customer?user={{htmlData.user}}">Customers</a></li>
            </ul>
          </li>
        </ul>
        <form class="d-flex mt-3" role="search">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
          <button class="btn btn-success" type="submit">Search</button>
        </form>
      </div>
    </div>
  </div>
</nav>


<br><br>

<div class="row">
    <div class="col-sm-3">
    <div class="card">
  <h5 class="card-header">Annotations</h5>
  <div class="card-body">
      <ul class="list-group list-group-flush" id="labelledAnnotations">
      </ul>
  </div></div>
</div>

    <div class="col-sm-8">
        <div class="card">
            <div class="card-header">
                <div id="myDIV">
    <button type="button" class="btn btn-outline-success active" id="green">Success</button>
<button type="button" class="btn btn-outline-danger" id="red">Danger</button>
<button type="button" class="btn btn-outline-warning" id="yellow">Warning</button>
</div>
            </div>
        <div class="card-body">
    <div id="text-container">
      <p id="text" onmouseup="selector();">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis rutrum nisi eget turpis pretium, quis bibendum sapien imperdiet. Nulla facilisi. Sed nec velit a libero commodo rhoncus. Vivamus pulvinar nisl quis libero efficitur interdum. Proin suscipit sagittis sapien in maximus. Duis porttitor, nisl ut venenatis faucibus, ante enim dapibus dolor, nec maximus sapien turpis in velit.</p>
    </div></div></div><br>
    <center><button type="submit" class="btn btn-primary" onclick="poster();">Save</button>
        <button class="btn btn-secondary">Next</button>
    </center>
    </div>


    </div>
    </form>
    <script>
    var header = document.getElementById("myDIV");
var btns = header.getElementsByClassName("btn");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function() {
  var current = document.getElementsByClassName("active");
  current[0].className = current[0].className.replace(" active", "");
  this.className += " active";
  });
}

    function txtWrapper(selectedTxt,col) {
    newTxt = '<span class="badge text-wrap"  style="background-color:'+col+';">'+ selectedTxt +'</span>';
    return newTxt;
    }
    const selections = []
  function selector() {
  sel = window.getSelection();
    selectedText = window.getSelection().toString();
    range = sel.getRangeAt(0);
    document.designMode = "on";
    console.log(selectedText);
    if (range) {
    sel.removeAllRanges();
    sel.addRange(range);
  }

    col = document.getElementById("myDIV").getElementsByClassName("active")[0].id
    labelName = document.getElementById("myDIV").getElementsByClassName("active")[0].textContent
    console.log(labelName);
    htmltxt = txtWrapper(selectedText,col);
    document.execCommand("insertHTML",false,htmltxt);

  // Set design mode to off
  document.designMode = "off";
  selectionTask = {"labelName":labelName,
  "text":selectedText,"color":col}
  selections.push(selectionTask)
  labelBasket();
}
    function labelBasket(){
    annotatedTxtbox = document.getElementById("labelledAnnotations");
    fullLabel = '';
    for (let i = 0; i < selections.length; i++) {
        console.log(selections[i].color);
        contHtml = '<li class="list-group-item"'+'style="color:'+selections[i].color+'">'+selections[i].text+'</li>';
        fullLabel = fullLabel + contHtml;
        console.log(selections[i].labelName,selections[i].text);

}
    annotatedTxtbox.innerHTML = fullLabel;
};

function poster(){
$.ajax({
    type: "POST",
    url: "{{ url_for("textNer") }}",
    contentType: "application/json",
    data: JSON.stringify(selections),
    dataType: "json",
    success: function(response) {
        console.log(response);
    },
    error: function(err) {
        console.log(err);
    }
});}
</script>



  <br>
<div class="footerBox" style="color:white;width:100%;background-color:#212529;">
<div class="container">
  <footer class="py-5">
    <div class="row">
      <div class="col-6 col-md-2 mb-3" style="color:white;">
        <h5>Company</h5>
        <ul class="nav flex-column">
          <li class="nav-item mb-2"><a href="/Contact?user={{htmlData.user}}" class="nav-link p-0 text-white">About</a></li>
          <li class="nav-item mb-2"><a href="/careers?user={{htmlData.user}}" class="nav-link p-0 text-white">Careers</a></li>
          <li class="nav-item mb-2"><a href="/security?user={{htmlData.user}}" class="nav-link p-0 text-white">Security</a></li>
          <li class="nav-item mb-2"><a href="/legal?user={{htmlData.user}}" class="nav-link p-0 text-white">Legal</a></li>
        </ul>
      </div>

      <div class="col-6 col-md-2 mb-3">
        <h5>EasyFill</h5>
        <ul class="nav flex-column">
          <li class="nav-item mb-2"><a href="/pricing?user={{htmlData.user}}" class="nav-link p-0 text-white">Pricing</a></li>
          <li class="nav-item mb-2"><a href="/faq?user={{htmlData.user}}" class="nav-link p-0 text-white">FAQs</a></li>
        </ul>
      </div>

      <div class="col-6 col-md-2 mb-3">
        <h5>Resources</h5>
        <ul class="nav flex-column">
          <li class="nav-item mb-2"><a href="/blog?user={{htmlData.user}}" class="nav-link p-0 text-white">Blog</a></li>
          <li class="nav-item mb-2"><a href="/customers?user={{htmlData.user}}" class="nav-link p-0 text-white">Customers</a></li>
        </ul>
      </div>

      <div class="col-md-5 offset-md-1 mb-3">
          <h5>Subscribe to our newsletter</h5>
          <p>Monthly digest of what's new and exciting from us.</p>
          <div class="d-flex flex-column flex-sm-row w-100 gap-2">
        <form action='/subscribe?user={{htmlData.user}}' method="post" enctype="multipart/form-data">
            <input name="newsletter1" id="newsletter1" type="text"  placeholder="Email address">
            <input type="submit" class="btn btn-danger" value="Subscribe"></input>
        </form>
          </div>
      </div>
    </div>

    <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
      <a class="navbar-brand" href="/?user={{htmlData.user}}">
        <img style="padding:0px;" src="/static/images/logo.svg" alt="Logo" width="140" height="70" class="d-inline-block align-text-top">
      </a>
      <p>&copy; 2023 EasyFill, Inc. All rights reserved.</p>
      <ul class="list-unstyled d-flex">
        <li class="ms-3"><a class="link-dark" href="/?user={{htmlData.user}}"><i class="fa-brands fa-twitter" style="color:white;font-size:40px;"></i></a></li>
        <li class="ms-3"><a class="link-dark" href=""><i class="fa-brands fa-instagram" style="color:white;font-size:40px;"></i></a></li>
        <li class="ms-3"><a class="link-dark" href="https://github.com/Mojo-lab"><i class="fa-brands fa-github" style="color:white;font-size:40px;"></i></a></li>
      </ul>
    </div>
  </footer>
</div>
  </div>
  </body>
</html>
