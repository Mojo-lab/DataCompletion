<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EasyFill-Magic</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/static/userHome.css" media="screen">
</head>
<body>
<header>
    <div class="navbar">
        <div class="logodiv">
        <a href="/" class="logo" data-image-width="10" data-image-height="28">
          <img src="/static/images/logo.png" class="logoimg">
        </a>
        </div>
        <div class="optionNav">
        <a href="/"><i class="fa fa-fw fa-home"></i> Home</a>
        <a href="pricing"><i class="fa fa-fw fa-search"></i> Pricing</a>
        <a href="/"><i class="fa fa-fw fa-envelope"></i> Contact</a>
        <a href="/logout"><i class="fa fa-fw fa-user"></i> Logout</a>
        </div>
        </div>
    </header>
<center>
    <h1>Hello {{user}}</h1>
<h1>Your Workspaces</h1>
            <table>
                <tr>
                    <div class="tableheaders">

                    <button class="htmlkeys" onclick="window.location.href='{{ url_for('newwork') }}';">&#43; New Workspace</button>
                        <button class="deletebutton" name="deletebutton" hidden="true" onclick="alert('button pressed');">&#x1F5D1; Delete</button>
                    <input style="border: 3px solid #ddd;font-size: 14px;padding: 10px 20px 12px 140px;position:absolute;left:1000px;text-align:left;" type="text" id="myInput" onkeyup="searchFunction()" placeholder="Search for workspaces.." title="Type in a name">

                </div>
                </tr>


            <thead><tr><th><input type="checkbox" name="selectall"  onchange="selectall(this);"></th>
            <th>Workspace Name</th>
            <th>Raw Data</th>
            <th>Imputed Data</th>
            <th>File size</th>
            <th>Created At</th>
                <th>Modified At</th></tr></thead>

            <tbody>
            {% for f in createdFiles %}
                <tr>
          <td><input type="checkbox" name="foo" onchange="selectfew();"></td>
            <td><a href="/eda/{{f.file}}">{{f.name}}</a></td>
            <td><a href="/eda/{{f.file}}">/eda/{{f.file}}</a></td>
            <td><a href="/eda/{{f.file}}">/eda/{{f.file}}</a></td>
            <td>200mb</td>
            <td>feb26</td>
                <td>feb26</td>
            </tr>
            {% endfor %}
            </tbody>

    </table>
    <script>
    function selectall(source){
    allselect = document.getElementsByName("selectall");
    console.log(allselect[0].checked);
    if (allselect[0].checked == false){
        console.log("not selected");
        deletebtn = document.getElementsByName('deletebutton');
        deletebtn[0].setAttribute("hidden", true);
        for(var i=0, n=checkboxes.length;i<n;i++) {
        checkboxes[i].checked = false;
    }}
    else{
        console.log("is selected");
        checkboxes = document.getElementsByName('foo');
        for(var i=0, n=checkboxes.length;i<n;i++) {
        checkboxes[i].checked = source.checked;
    }
        deletebtn = document.getElementsByName('deletebutton');
        deletebtn[0].removeAttribute("hidden");
        deletebtn[0].style.fontSize = '25px';
        deletebtn[0].style.color = '#FF4136';
        deletebtn[0].style.backgroundColor = 'white';
        deletebtn[0].style.border = '2px solid #FF4136';
        deletebtn[0].style.cursor =  'pointer';
        deletebtn[0].style.padding =  '0px 20px';
    }
    }

    function selectfew(){
    allselect = document.getElementsByName('foo');
    console.log(allselect);
    noopt = false;
    for(var i=0, n=allselect.length;i<n;i++){
        if(allselect[i].checked == true){
        noopt = true;}
        }
    if(noopt == true){
        deletebtn = document.getElementsByName('deletebutton');
        deletebtn[0].removeAttribute("hidden");
        deletebtn[0].style.fontSize = '25px';
        deletebtn[0].style.color = '#FF4136';
        deletebtn[0].style.backgroundColor = 'white';
        deletebtn[0].style.border = '2px solid #FF4136';
        deletebtn[0].style.cursor =  'pointer';
        deletebtn[0].style.padding =  '0px 20px';
    }
    else{
        deletebtn = document.getElementsByName('deletebutton');
        deletebtn[0].setAttribute("hidden", true);
        allselect_ = document.getElementsByName("selectall");
        allselect_[0].checked = false;
    }
    }

    function searchFunction() {
  var input, filter, table, tr, td, i, txtValue;
  input = document.getElementById("myInput");
  filter = input.value.toUpperCase();
  table = document.getElementsByTagName("table");
  tr = document.getElementsByTagName("tr");
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[1];
    if (td) {
      txtValue = td.textContent || td.innerText;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    }
  }
}
    </script>
</center>
</body>
</html>